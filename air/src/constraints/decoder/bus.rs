use miden_core::field::PrimeCharacteristicRing;
use miden_crypto::stark::air::MidenAirBuilder;

use crate::MainTraceRow;

pub fn enforce_decoder_bus_constraints<AB>(builder: &mut AB, alpha: AB::RandomVar, beta_challenges: &[AB::RandomVar], aux_current: &[AB::VarEF], aux_next: &[AB::VarEF], local: &MainTraceRow<AB::Var>, next: &MainTraceRow<AB::Var>)
where
    AB: MidenAirBuilder,
{
    enforce_block_stack_table_constraints(builder, alpha, &beta_challenges, &aux_current, &aux_next, local, next);
    enforce_block_hash_table_constraints(builder, alpha, &beta_challenges, &aux_current, &aux_next, local, next);
    enforce_op_group_table_constraints(builder, alpha, &beta_challenges, &aux_current, &aux_next, local, next);
}

pub fn enforce_block_stack_table_constraints<AB>(builder: &mut AB, alpha: AB::RandomVar, beta_challenges: &[AB::RandomVar], aux_current: &[AB::VarEF], aux_next: &[AB::VarEF], local: &MainTraceRow<AB::Var>, next: &MainTraceRow<AB::Var>)
where
    AB: MidenAirBuilder,
{
    // FIXME: This uses main_current[1] (unused system value)
    //builder.when_transition().assert_zero_ext(((alpha.into() + AB::ExprEF::from(local.decoder[0].clone().into()) * beta_challenges[0].into() + AB::ExprEF::from(local.decoder[0].clone().into()) * beta_challenges[1].into()) * AB::ExprEF::from(local.decoder[22].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[4].clone().into())) * AB::ExprEF::from(local.decoder[3].clone().into()) * AB::ExprEF::from(local.decoder[2].clone().into()) * AB::ExprEF::from(local.decoder[1].clone().into()) + AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[22].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[4].clone().into())) * AB::ExprEF::from(local.decoder[3].clone().into()) * AB::ExprEF::from(local.decoder[2].clone().into()) * AB::ExprEF::from(local.decoder[1].clone().into())) * ((alpha.into() + AB::ExprEF::from(local.decoder[0].clone().into()) * beta_challenges[0].into() + AB::ExprEF::from(local.decoder[0].clone().into()) * beta_challenges[1].into()) * AB::ExprEF::from(local.decoder[22].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[4].clone().into())) * AB::ExprEF::from(local.decoder[3].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[2].clone().into())) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[1].clone().into())) + AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[22].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[4].clone().into())) * AB::ExprEF::from(local.decoder[3].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[2].clone().into())) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[1].clone().into()))) * ((alpha.into() + AB::ExprEF::from(local.decoder[0].clone().into()) * beta_challenges[0].into() + AB::ExprEF::from(local.decoder[0].clone().into()) * beta_challenges[1].into()) * AB::ExprEF::from(local.decoder[22].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[4].clone().into())) * AB::ExprEF::from(local.decoder[3].clone().into()) * AB::ExprEF::from(local.decoder[2].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[1].clone().into())) + AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[22].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[4].clone().into())) * AB::ExprEF::from(local.decoder[3].clone().into()) * AB::ExprEF::from(local.decoder[2].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[1].clone().into()))) * ((alpha.into() + AB::ExprEF::from(local.decoder[0].clone().into()) * beta_challenges[0].into() + AB::ExprEF::from(local.decoder[0].clone().into()) * beta_challenges[1].into()) * AB::ExprEF::from(local.decoder[22].clone().into()) * AB::ExprEF::from(local.decoder[4].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[3].clone().into())) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[2].clone().into())) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[1].clone().into())) + AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[22].clone().into()) * AB::ExprEF::from(local.decoder[4].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[3].clone().into())) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[2].clone().into())) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[1].clone().into()))) * ((alpha.into() + AB::ExprEF::from(local.decoder[0].clone().into()) * beta_challenges[0].into() + AB::ExprEF::from(local.decoder[0].clone().into()) * beta_challenges[1].into() + AB::ExprEF::from(local.stack[0].clone().into()) * beta_challenges[2].into()) * AB::ExprEF::from(local.decoder[22].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[4].clone().into())) * AB::ExprEF::from(local.decoder[3].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[2].clone().into())) * AB::ExprEF::from(local.decoder[1].clone().into()) + AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[22].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[4].clone().into())) * AB::ExprEF::from(local.decoder[3].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[2].clone().into())) * AB::ExprEF::from(local.decoder[1].clone().into())) * ((alpha.into() + AB::ExprEF::from(local.decoder[0].clone().into()) * beta_challenges[0].into() + AB::ExprEF::from(local.decoder[9].clone().into()) * beta_challenges[1].into()) * AB::ExprEF::from(local.decoder[23].clone().into()) * AB::ExprEF::from(local.decoder[5].clone().into()) * AB::ExprEF::from(local.decoder[4].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[3].clone().into())) + AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[23].clone().into()) * AB::ExprEF::from(local.decoder[5].clone().into()) * AB::ExprEF::from(local.decoder[4].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[3].clone().into()))) * ((alpha.into() + AB::ExprEF::from(local.decoder[0].clone().into()) * beta_challenges[0].into() + AB::ExprEF::from(local.decoder[0].clone().into()) * beta_challenges[1].into() + AB::ExprEF::from(local.ctx.clone().into()) * beta_challenges[3].into() + AB::ExprEF::from(main_current[1].clone().into()) * beta_challenges[4].into() + AB::ExprEF::from(local.stack[16].clone().into()) * beta_challenges[5].into() + AB::ExprEF::from(local.stack[17].clone().into()) * beta_challenges[6].into() + AB::ExprEF::from(local.decoder[8].clone().into()) * beta_challenges[7].into() + AB::ExprEF::from(local.decoder[9].clone().into()) * beta_challenges[8].into() + AB::ExprEF::from(local.decoder[10].clone().into()) * beta_challenges[9].into() + AB::ExprEF::from(local.decoder[11].clone().into()) * beta_challenges[10].into()) * AB::ExprEF::from(local.decoder[23].clone().into()) * AB::ExprEF::from(local.decoder[5].clone().into()) * AB::ExprEF::from(local.decoder[4].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[3].clone().into())) + AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[23].clone().into()) * AB::ExprEF::from(local.decoder[5].clone().into()) * AB::ExprEF::from(local.decoder[4].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[3].clone().into()))) * ((alpha.into() + AB::ExprEF::from(local.decoder[0].clone().into()) * beta_challenges[0].into() + AB::ExprEF::from(local.decoder[0].clone().into()) * beta_challenges[1].into() + AB::ExprEF::from(local.ctx.clone().into()) * beta_challenges[3].into() + AB::ExprEF::from(main_current[1].clone().into()) * beta_challenges[4].into() + AB::ExprEF::from(local.stack[16].clone().into()) * beta_challenges[5].into() + AB::ExprEF::from(local.stack[17].clone().into()) * beta_challenges[6].into() + AB::ExprEF::from(local.decoder[8].clone().into()) * beta_challenges[7].into() + AB::ExprEF::from(local.decoder[9].clone().into()) * beta_challenges[8].into() + AB::ExprEF::from(local.decoder[10].clone().into()) * beta_challenges[9].into() + AB::ExprEF::from(local.decoder[11].clone().into()) * beta_challenges[10].into()) * AB::ExprEF::from(local.decoder[23].clone().into()) * AB::ExprEF::from(local.decoder[5].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[4].clone().into())) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[3].clone().into())) + AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[23].clone().into()) * AB::ExprEF::from(local.decoder[5].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[4].clone().into())) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[3].clone().into()))) * ((alpha.into() + AB::ExprEF::from(local.decoder[0].clone().into()) * beta_challenges[0].into() + AB::ExprEF::from(local.decoder[0].clone().into()) * beta_challenges[1].into() + AB::ExprEF::from(local.ctx.clone().into()) * beta_challenges[3].into() + AB::ExprEF::from(main_current[1].clone().into()) * beta_challenges[4].into() + AB::ExprEF::from(local.decoder[12].clone().into()) * beta_challenges[5].into() + AB::ExprEF::from(local.decoder[13].clone().into()) * beta_challenges[6].into() + AB::ExprEF::from(local.fn_hash[0].clone().into()) * beta_challenges[7].into() + AB::ExprEF::from(local.fn_hash[1].clone().into()) * beta_challenges[8].into() + AB::ExprEF::from(local.fn_hash[2].clone().into()) * beta_challenges[9].into() + AB::ExprEF::from(local.fn_hash[3].clone().into()) * beta_challenges[10].into()) * AB::ExprEF::from(local.decoder[22].clone().into()) * AB::ExprEF::from(local.decoder[4].clone().into()) * AB::ExprEF::from(local.decoder[3].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[2].clone().into())) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[1].clone().into())) + AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[22].clone().into()) * AB::ExprEF::from(local.decoder[4].clone().into()) * AB::ExprEF::from(local.decoder[3].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[2].clone().into())) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[1].clone().into()))) * AB::ExprEF::from(aux_current[0].clone().into()) - ((alpha.into() + AB::ExprEF::from(local.decoder[0].clone().into()) * beta_challenges[0].into() + AB::ExprEF::from(local.decoder[9].clone().into()) * beta_challenges[1].into()) * AB::ExprEF::from(local.decoder[23].clone().into()) * AB::ExprEF::from(local.decoder[5].clone().into()) * AB::ExprEF::from(local.decoder[4].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[3].clone().into())) + AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[23].clone().into()) * AB::ExprEF::from(local.decoder[5].clone().into()) * AB::ExprEF::from(local.decoder[4].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[3].clone().into()))) * ((alpha.into() + AB::ExprEF::from(local.decoder[0].clone().into()) * beta_challenges[0].into() + AB::ExprEF::from(local.decoder[9].clone().into()) * beta_challenges[1].into() + (AB::ExprEF::from(local.decoder[14].clone().into()) + AB::ExprEF::from(local.decoder[15].clone().into())) * AB::ExprEF::from(local.decoder[13].clone().into()) * beta_challenges[2].into() + AB::ExprEF::from(local.decoder[10].clone().into()) * beta_challenges[3].into() + AB::ExprEF::from(local.decoder[11].clone().into()) * beta_challenges[4].into() + AB::ExprEF::from(local.decoder[12].clone().into()) * beta_challenges[5].into() + AB::ExprEF::from(local.decoder[13].clone().into()) * beta_challenges[6].into() + AB::ExprEF::from(local.decoder[8].clone().into()) * beta_challenges[7].into() + AB::ExprEF::from(local.decoder[9].clone().into()) * beta_challenges[8].into() + AB::ExprEF::from(local.decoder[10].clone().into()) * beta_challenges[9].into() + AB::ExprEF::from(local.decoder[11].clone().into()) * beta_challenges[10].into()) * AB::ExprEF::from(local.decoder[23].clone().into()) * AB::ExprEF::from(local.decoder[5].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[4].clone().into())) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[3].clone().into())) * (AB::ExprEF::from(local.decoder[14].clone().into()) + AB::ExprEF::from(local.decoder[15].clone().into())) + AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[23].clone().into()) * AB::ExprEF::from(local.decoder[5].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[4].clone().into())) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[3].clone().into())) * (AB::ExprEF::from(local.decoder[14].clone().into()) + AB::ExprEF::from(local.decoder[15].clone().into()))) * ((alpha.into() + AB::ExprEF::from(local.decoder[0].clone().into()) * beta_challenges[0].into() + AB::ExprEF::from(local.decoder[9].clone().into()) * beta_challenges[1].into()) * AB::ExprEF::from(local.decoder[23].clone().into()) * AB::ExprEF::from(local.decoder[5].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[4].clone().into())) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[3].clone().into())) * (AB::ExprEF::ONE - (AB::ExprEF::from(local.decoder[14].clone().into()) + AB::ExprEF::from(local.decoder[15].clone().into()))) + AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[23].clone().into()) * AB::ExprEF::from(local.decoder[5].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[4].clone().into())) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[3].clone().into())) * (AB::ExprEF::ONE - (AB::ExprEF::from(local.decoder[14].clone().into()) + AB::ExprEF::from(local.decoder[15].clone().into())))) * AB::ExprEF::from(aux_next[0].clone().into()));
}

pub fn enforce_block_hash_table_constraints<AB>(builder: &mut AB, alpha: AB::RandomVar, beta_challenges: &[AB::RandomVar], aux_current: &[AB::VarEF], aux_next: &[AB::VarEF], local: &MainTraceRow<AB::Var>, next: &MainTraceRow<AB::Var>)
where
    AB: MidenAirBuilder,
{
    builder.when_transition().assert_zero_ext(((alpha.into() + AB::ExprEF::from(local.decoder[0].clone().into()) * beta_challenges[0].into() + AB::ExprEF::from(local.decoder[8].clone().into()) * beta_challenges[1].into() + AB::ExprEF::from(local.decoder[9].clone().into()) * beta_challenges[2].into() + AB::ExprEF::from(local.decoder[10].clone().into()) * beta_challenges[3].into() + AB::ExprEF::from(local.decoder[11].clone().into()) * beta_challenges[4].into() + beta_challenges[5].into()) * AB::ExprEF::from(local.decoder[22].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[4].clone().into())) * AB::ExprEF::from(local.decoder[3].clone().into()) * AB::ExprEF::from(local.decoder[2].clone().into()) * AB::ExprEF::from(local.decoder[1].clone().into()) + AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[22].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[4].clone().into())) * AB::ExprEF::from(local.decoder[3].clone().into()) * AB::ExprEF::from(local.decoder[2].clone().into()) * AB::ExprEF::from(local.decoder[1].clone().into())) * ((alpha.into() + AB::ExprEF::from(local.decoder[0].clone().into()) * beta_challenges[0].into() + AB::ExprEF::from(local.decoder[12].clone().into()) * beta_challenges[1].into() + AB::ExprEF::from(local.decoder[13].clone().into()) * beta_challenges[2].into() + AB::ExprEF::from(local.decoder[14].clone().into()) * beta_challenges[3].into() + AB::ExprEF::from(local.decoder[15].clone().into()) * beta_challenges[4].into()) * AB::ExprEF::from(local.decoder[22].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[4].clone().into())) * AB::ExprEF::from(local.decoder[3].clone().into()) * AB::ExprEF::from(local.decoder[2].clone().into()) * AB::ExprEF::from(local.decoder[1].clone().into()) + AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[22].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[4].clone().into())) * AB::ExprEF::from(local.decoder[3].clone().into()) * AB::ExprEF::from(local.decoder[2].clone().into()) * AB::ExprEF::from(local.decoder[1].clone().into())) * ((alpha.into() + AB::ExprEF::from(local.decoder[0].clone().into()) * beta_challenges[0].into() + (AB::ExprEF::from(local.stack[0].clone().into()) * AB::ExprEF::from(local.decoder[8].clone().into()) + (AB::ExprEF::ONE - AB::ExprEF::from(local.stack[0].clone().into())) * AB::ExprEF::from(local.decoder[12].clone().into())) * beta_challenges[1].into() + (AB::ExprEF::from(local.stack[0].clone().into()) * AB::ExprEF::from(local.decoder[9].clone().into()) + (AB::ExprEF::ONE - AB::ExprEF::from(local.stack[0].clone().into())) * AB::ExprEF::from(local.decoder[13].clone().into())) * beta_challenges[2].into() + (AB::ExprEF::from(local.stack[0].clone().into()) * AB::ExprEF::from(local.decoder[10].clone().into()) + (AB::ExprEF::ONE - AB::ExprEF::from(local.stack[0].clone().into())) * AB::ExprEF::from(local.decoder[14].clone().into())) * beta_challenges[3].into() + (AB::ExprEF::from(local.stack[0].clone().into()) * AB::ExprEF::from(local.decoder[11].clone().into()) + (AB::ExprEF::ONE - AB::ExprEF::from(local.stack[0].clone().into())) * AB::ExprEF::from(local.decoder[15].clone().into())) * beta_challenges[4].into()) * AB::ExprEF::from(local.decoder[22].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[4].clone().into())) * AB::ExprEF::from(local.decoder[3].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[2].clone().into())) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[1].clone().into())) + AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[22].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[4].clone().into())) * AB::ExprEF::from(local.decoder[3].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[2].clone().into())) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[1].clone().into()))) * ((alpha.into() + AB::ExprEF::from(local.decoder[0].clone().into()) * beta_challenges[0].into() + AB::ExprEF::from(local.decoder[8].clone().into()) * beta_challenges[1].into() + AB::ExprEF::from(local.decoder[9].clone().into()) * beta_challenges[2].into() + AB::ExprEF::from(local.decoder[10].clone().into()) * beta_challenges[3].into() + AB::ExprEF::from(local.decoder[11].clone().into()) * beta_challenges[4].into() + beta_challenges[6].into()) * AB::ExprEF::from(local.decoder[22].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[4].clone().into())) * AB::ExprEF::from(local.decoder[3].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[2].clone().into())) * AB::ExprEF::from(local.decoder[1].clone().into()) * AB::ExprEF::from(local.stack[0].clone().into()) + AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[22].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[4].clone().into())) * AB::ExprEF::from(local.decoder[3].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[2].clone().into())) * AB::ExprEF::from(local.decoder[1].clone().into()) * AB::ExprEF::from(local.stack[0].clone().into())) * ((alpha.into() + AB::ExprEF::from(local.decoder[0].clone().into()) * beta_challenges[0].into() + AB::ExprEF::from(local.decoder[8].clone().into()) * beta_challenges[1].into() + AB::ExprEF::from(local.decoder[9].clone().into()) * beta_challenges[2].into() + AB::ExprEF::from(local.decoder[10].clone().into()) * beta_challenges[3].into() + AB::ExprEF::from(local.decoder[11].clone().into()) * beta_challenges[4].into() + beta_challenges[6].into()) * AB::ExprEF::from(local.decoder[23].clone().into()) * AB::ExprEF::from(local.decoder[5].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[4].clone().into())) * AB::ExprEF::from(local.decoder[3].clone().into()) + AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[23].clone().into()) * AB::ExprEF::from(local.decoder[5].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[4].clone().into())) * AB::ExprEF::from(local.decoder[3].clone().into())) * ((alpha.into() + AB::ExprEF::from(local.decoder[0].clone().into()) * beta_challenges[0].into() + AB::ExprEF::from(local.decoder[8].clone().into()) * beta_challenges[1].into() + AB::ExprEF::from(local.decoder[9].clone().into()) * beta_challenges[2].into() + AB::ExprEF::from(local.decoder[10].clone().into()) * beta_challenges[3].into() + AB::ExprEF::from(local.decoder[11].clone().into()) * beta_challenges[4].into()) * AB::ExprEF::from(local.decoder[22].clone().into()) * AB::ExprEF::from(local.decoder[4].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[3].clone().into())) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[2].clone().into())) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[1].clone().into())) + AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[22].clone().into()) * AB::ExprEF::from(local.decoder[4].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[3].clone().into())) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[2].clone().into())) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[1].clone().into()))) * ((alpha.into() + AB::ExprEF::from(local.decoder[0].clone().into()) * beta_challenges[0].into() + AB::ExprEF::from(local.decoder[8].clone().into()) * beta_challenges[1].into() + AB::ExprEF::from(local.decoder[9].clone().into()) * beta_challenges[2].into() + AB::ExprEF::from(local.decoder[10].clone().into()) * beta_challenges[3].into() + AB::ExprEF::from(local.decoder[11].clone().into()) * beta_challenges[4].into()) * AB::ExprEF::from(local.decoder[22].clone().into()) * AB::ExprEF::from(local.decoder[4].clone().into()) * AB::ExprEF::from(local.decoder[3].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[2].clone().into())) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[1].clone().into())) + AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[22].clone().into()) * AB::ExprEF::from(local.decoder[4].clone().into()) * AB::ExprEF::from(local.decoder[3].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[2].clone().into())) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[1].clone().into()))) * ((alpha.into() + AB::ExprEF::from(local.decoder[0].clone().into()) * beta_challenges[0].into() + AB::ExprEF::from(local.decoder[8].clone().into()) * beta_challenges[1].into() + AB::ExprEF::from(local.decoder[9].clone().into()) * beta_challenges[2].into() + AB::ExprEF::from(local.decoder[10].clone().into()) * beta_challenges[3].into() + AB::ExprEF::from(local.decoder[11].clone().into()) * beta_challenges[4].into()) * AB::ExprEF::from(local.decoder[23].clone().into()) * AB::ExprEF::from(local.decoder[5].clone().into()) * AB::ExprEF::from(local.decoder[4].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[3].clone().into())) + AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[23].clone().into()) * AB::ExprEF::from(local.decoder[5].clone().into()) * AB::ExprEF::from(local.decoder[4].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[3].clone().into()))) * ((alpha.into() + AB::ExprEF::from(local.decoder[0].clone().into()) * beta_challenges[0].into() + AB::ExprEF::from(local.decoder[8].clone().into()) * beta_challenges[1].into() + AB::ExprEF::from(local.decoder[9].clone().into()) * beta_challenges[2].into() + AB::ExprEF::from(local.decoder[10].clone().into()) * beta_challenges[3].into() + AB::ExprEF::from(local.decoder[11].clone().into()) * beta_challenges[4].into()) * AB::ExprEF::from(local.decoder[23].clone().into()) * AB::ExprEF::from(local.decoder[5].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[4].clone().into())) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[3].clone().into())) + AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[23].clone().into()) * AB::ExprEF::from(local.decoder[5].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[4].clone().into())) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[3].clone().into()))) * ((alpha.into() + AB::ExprEF::from(local.decoder[0].clone().into()) * beta_challenges[0].into() + AB::ExprEF::from(local.decoder[8].clone().into()) * beta_challenges[1].into() + AB::ExprEF::from(local.decoder[9].clone().into()) * beta_challenges[2].into() + AB::ExprEF::from(local.decoder[10].clone().into()) * beta_challenges[3].into() + AB::ExprEF::from(local.decoder[11].clone().into()) * beta_challenges[4].into()) * AB::ExprEF::from(local.decoder[22].clone().into()) * AB::ExprEF::from(local.decoder[4].clone().into()) * AB::ExprEF::from(local.decoder[3].clone().into()) * AB::ExprEF::from(local.decoder[2].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[1].clone().into())) + AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[22].clone().into()) * AB::ExprEF::from(local.decoder[4].clone().into()) * AB::ExprEF::from(local.decoder[3].clone().into()) * AB::ExprEF::from(local.decoder[2].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[1].clone().into()))) * AB::ExprEF::from(aux_current[1].clone().into()) - ((alpha.into() + AB::ExprEF::from(local.decoder[0].clone().into()) * beta_challenges[0].into() + AB::ExprEF::from(local.decoder[8].clone().into()) * beta_challenges[1].into() + AB::ExprEF::from(local.decoder[9].clone().into()) * beta_challenges[2].into() + AB::ExprEF::from(local.decoder[10].clone().into()) * beta_challenges[3].into() + AB::ExprEF::from(local.decoder[11].clone().into()) * beta_challenges[4].into() + (AB::ExprEF::ONE - (AB::ExprEF::from(next.decoder[23].clone().into()) * AB::ExprEF::from(next.decoder[5].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(next.decoder[4].clone().into())) + AB::ExprEF::from(next.decoder[23].clone().into()) * AB::ExprEF::from(next.decoder[5].clone().into()) * AB::ExprEF::from(next.decoder[4].clone().into()) * AB::ExprEF::from(next.decoder[3].clone().into()))) * beta_challenges[5].into() + AB::ExprEF::from(local.decoder[12].clone().into()) * beta_challenges[6].into()) * AB::ExprEF::from(local.decoder[23].clone().into()) * AB::ExprEF::from(local.decoder[5].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[4].clone().into())) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[3].clone().into())) + AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[23].clone().into()) * AB::ExprEF::from(local.decoder[5].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[4].clone().into())) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[3].clone().into()))) * AB::ExprEF::from(aux_next[1].clone().into()));
}

pub fn enforce_op_group_table_constraints<AB>(builder: &mut AB, alpha: AB::RandomVar, beta_challenges: &[AB::RandomVar], aux_current: &[AB::VarEF], aux_next: &[AB::VarEF], local: &MainTraceRow<AB::Var>, next: &MainTraceRow<AB::Var>)
where
    AB: MidenAirBuilder,
{
    builder.when_transition().assert_zero_ext(((alpha.into() + AB::ExprEF::from(local.decoder[0].clone().into()) * beta_challenges[0].into() + (AB::ExprEF::from(local.decoder[17].clone().into()) - AB::ExprEF::ONE) * beta_challenges[1].into() + AB::ExprEF::from(local.decoder[9].clone().into()) * beta_challenges[2].into()) * (AB::ExprEF::from(local.decoder[22].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[4].clone().into())) * AB::ExprEF::from(local.decoder[3].clone().into()) * AB::ExprEF::from(local.decoder[2].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[1].clone().into())) + AB::ExprEF::from(local.decoder[23].clone().into()) * AB::ExprEF::from(local.decoder[5].clone().into()) * AB::ExprEF::from(local.decoder[4].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[3].clone().into()))) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[19].clone().into())) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[20].clone().into())) * AB::ExprEF::from(local.decoder[21].clone().into()) + AB::ExprEF::ONE - (AB::ExprEF::from(local.decoder[22].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[4].clone().into())) * AB::ExprEF::from(local.decoder[3].clone().into()) * AB::ExprEF::from(local.decoder[2].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[1].clone().into())) + AB::ExprEF::from(local.decoder[23].clone().into()) * AB::ExprEF::from(local.decoder[5].clone().into()) * AB::ExprEF::from(local.decoder[4].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[3].clone().into()))) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[19].clone().into())) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[20].clone().into())) * AB::ExprEF::from(local.decoder[21].clone().into())) * ((alpha.into() + AB::ExprEF::from(local.decoder[0].clone().into()) * beta_challenges[0].into() + (AB::ExprEF::from(local.decoder[17].clone().into()) - AB::ExprEF::ONE) * beta_challenges[1].into() + AB::ExprEF::from(local.decoder[9].clone().into()) * beta_challenges[2].into()) * (AB::ExprEF::from(local.decoder[22].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[4].clone().into())) * AB::ExprEF::from(local.decoder[3].clone().into()) * AB::ExprEF::from(local.decoder[2].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[1].clone().into())) + AB::ExprEF::from(local.decoder[23].clone().into()) * AB::ExprEF::from(local.decoder[5].clone().into()) * AB::ExprEF::from(local.decoder[4].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[3].clone().into()))) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[19].clone().into())) * AB::ExprEF::from(local.decoder[20].clone().into()) * AB::ExprEF::from(local.decoder[21].clone().into()) + AB::ExprEF::ONE - (AB::ExprEF::from(local.decoder[22].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[4].clone().into())) * AB::ExprEF::from(local.decoder[3].clone().into()) * AB::ExprEF::from(local.decoder[2].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[1].clone().into())) + AB::ExprEF::from(local.decoder[23].clone().into()) * AB::ExprEF::from(local.decoder[5].clone().into()) * AB::ExprEF::from(local.decoder[4].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[3].clone().into()))) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[19].clone().into())) * AB::ExprEF::from(local.decoder[20].clone().into()) * AB::ExprEF::from(local.decoder[21].clone().into())) * ((alpha.into() + AB::ExprEF::from(local.decoder[0].clone().into()) * beta_challenges[0].into() + (AB::ExprEF::from(local.decoder[17].clone().into()) - AB::ExprEF::from_u64(2)) * beta_challenges[1].into() + AB::ExprEF::from(local.decoder[10].clone().into()) * beta_challenges[2].into()) * (AB::ExprEF::from(local.decoder[22].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[4].clone().into())) * AB::ExprEF::from(local.decoder[3].clone().into()) * AB::ExprEF::from(local.decoder[2].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[1].clone().into())) + AB::ExprEF::from(local.decoder[23].clone().into()) * AB::ExprEF::from(local.decoder[5].clone().into()) * AB::ExprEF::from(local.decoder[4].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[3].clone().into()))) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[19].clone().into())) * AB::ExprEF::from(local.decoder[20].clone().into()) * AB::ExprEF::from(local.decoder[21].clone().into()) + AB::ExprEF::ONE - (AB::ExprEF::from(local.decoder[22].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[4].clone().into())) * AB::ExprEF::from(local.decoder[3].clone().into()) * AB::ExprEF::from(local.decoder[2].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[1].clone().into())) + AB::ExprEF::from(local.decoder[23].clone().into()) * AB::ExprEF::from(local.decoder[5].clone().into()) * AB::ExprEF::from(local.decoder[4].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[3].clone().into()))) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[19].clone().into())) * AB::ExprEF::from(local.decoder[20].clone().into()) * AB::ExprEF::from(local.decoder[21].clone().into())) * ((alpha.into() + AB::ExprEF::from(local.decoder[0].clone().into()) * beta_challenges[0].into() + (AB::ExprEF::from(local.decoder[17].clone().into()) - AB::ExprEF::from_u64(3)) * beta_challenges[1].into() + AB::ExprEF::from(local.decoder[11].clone().into()) * beta_challenges[2].into()) * (AB::ExprEF::from(local.decoder[22].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[4].clone().into())) * AB::ExprEF::from(local.decoder[3].clone().into()) * AB::ExprEF::from(local.decoder[2].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[1].clone().into())) + AB::ExprEF::from(local.decoder[23].clone().into()) * AB::ExprEF::from(local.decoder[5].clone().into()) * AB::ExprEF::from(local.decoder[4].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[3].clone().into()))) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[19].clone().into())) * AB::ExprEF::from(local.decoder[20].clone().into()) * AB::ExprEF::from(local.decoder[21].clone().into()) + AB::ExprEF::ONE - (AB::ExprEF::from(local.decoder[22].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[4].clone().into())) * AB::ExprEF::from(local.decoder[3].clone().into()) * AB::ExprEF::from(local.decoder[2].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[1].clone().into())) + AB::ExprEF::from(local.decoder[23].clone().into()) * AB::ExprEF::from(local.decoder[5].clone().into()) * AB::ExprEF::from(local.decoder[4].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[3].clone().into()))) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[19].clone().into())) * AB::ExprEF::from(local.decoder[20].clone().into()) * AB::ExprEF::from(local.decoder[21].clone().into())) * ((alpha.into() + AB::ExprEF::from(local.decoder[0].clone().into()) * beta_challenges[0].into() + (AB::ExprEF::from(local.decoder[17].clone().into()) - AB::ExprEF::ONE) * beta_challenges[1].into() + AB::ExprEF::from(local.decoder[9].clone().into()) * beta_challenges[2].into()) * (AB::ExprEF::from(local.decoder[22].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[4].clone().into())) * AB::ExprEF::from(local.decoder[3].clone().into()) * AB::ExprEF::from(local.decoder[2].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[1].clone().into())) + AB::ExprEF::from(local.decoder[23].clone().into()) * AB::ExprEF::from(local.decoder[5].clone().into()) * AB::ExprEF::from(local.decoder[4].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[3].clone().into()))) * AB::ExprEF::from(local.decoder[19].clone().into()) + AB::ExprEF::ONE - (AB::ExprEF::from(local.decoder[22].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[4].clone().into())) * AB::ExprEF::from(local.decoder[3].clone().into()) * AB::ExprEF::from(local.decoder[2].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[1].clone().into())) + AB::ExprEF::from(local.decoder[23].clone().into()) * AB::ExprEF::from(local.decoder[5].clone().into()) * AB::ExprEF::from(local.decoder[4].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[3].clone().into()))) * AB::ExprEF::from(local.decoder[19].clone().into())) * ((alpha.into() + AB::ExprEF::from(local.decoder[0].clone().into()) * beta_challenges[0].into() + (AB::ExprEF::from(local.decoder[17].clone().into()) - AB::ExprEF::from_u64(2)) * beta_challenges[1].into() + AB::ExprEF::from(local.decoder[10].clone().into()) * beta_challenges[2].into()) * (AB::ExprEF::from(local.decoder[22].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[4].clone().into())) * AB::ExprEF::from(local.decoder[3].clone().into()) * AB::ExprEF::from(local.decoder[2].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[1].clone().into())) + AB::ExprEF::from(local.decoder[23].clone().into()) * AB::ExprEF::from(local.decoder[5].clone().into()) * AB::ExprEF::from(local.decoder[4].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[3].clone().into()))) * AB::ExprEF::from(local.decoder[19].clone().into()) + AB::ExprEF::ONE - (AB::ExprEF::from(local.decoder[22].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[4].clone().into())) * AB::ExprEF::from(local.decoder[3].clone().into()) * AB::ExprEF::from(local.decoder[2].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[1].clone().into())) + AB::ExprEF::from(local.decoder[23].clone().into()) * AB::ExprEF::from(local.decoder[5].clone().into()) * AB::ExprEF::from(local.decoder[4].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[3].clone().into()))) * AB::ExprEF::from(local.decoder[19].clone().into())) * ((alpha.into() + AB::ExprEF::from(local.decoder[0].clone().into()) * beta_challenges[0].into() + (AB::ExprEF::from(local.decoder[17].clone().into()) - AB::ExprEF::from_u64(3)) * beta_challenges[1].into() + AB::ExprEF::from(local.decoder[11].clone().into()) * beta_challenges[2].into()) * (AB::ExprEF::from(local.decoder[22].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[4].clone().into())) * AB::ExprEF::from(local.decoder[3].clone().into()) * AB::ExprEF::from(local.decoder[2].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[1].clone().into())) + AB::ExprEF::from(local.decoder[23].clone().into()) * AB::ExprEF::from(local.decoder[5].clone().into()) * AB::ExprEF::from(local.decoder[4].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[3].clone().into()))) * AB::ExprEF::from(local.decoder[19].clone().into()) + AB::ExprEF::ONE - (AB::ExprEF::from(local.decoder[22].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[4].clone().into())) * AB::ExprEF::from(local.decoder[3].clone().into()) * AB::ExprEF::from(local.decoder[2].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[1].clone().into())) + AB::ExprEF::from(local.decoder[23].clone().into()) * AB::ExprEF::from(local.decoder[5].clone().into()) * AB::ExprEF::from(local.decoder[4].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[3].clone().into()))) * AB::ExprEF::from(local.decoder[19].clone().into())) * ((alpha.into() + AB::ExprEF::from(local.decoder[0].clone().into()) * beta_challenges[0].into() + (AB::ExprEF::from(local.decoder[17].clone().into()) - AB::ExprEF::from_u64(4)) * beta_challenges[1].into() + AB::ExprEF::from(local.decoder[12].clone().into()) * beta_challenges[2].into()) * (AB::ExprEF::from(local.decoder[22].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[4].clone().into())) * AB::ExprEF::from(local.decoder[3].clone().into()) * AB::ExprEF::from(local.decoder[2].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[1].clone().into())) + AB::ExprEF::from(local.decoder[23].clone().into()) * AB::ExprEF::from(local.decoder[5].clone().into()) * AB::ExprEF::from(local.decoder[4].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[3].clone().into()))) * AB::ExprEF::from(local.decoder[19].clone().into()) + AB::ExprEF::ONE - (AB::ExprEF::from(local.decoder[22].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[4].clone().into())) * AB::ExprEF::from(local.decoder[3].clone().into()) * AB::ExprEF::from(local.decoder[2].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[1].clone().into())) + AB::ExprEF::from(local.decoder[23].clone().into()) * AB::ExprEF::from(local.decoder[5].clone().into()) * AB::ExprEF::from(local.decoder[4].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[3].clone().into()))) * AB::ExprEF::from(local.decoder[19].clone().into())) * ((alpha.into() + AB::ExprEF::from(local.decoder[0].clone().into()) * beta_challenges[0].into() + (AB::ExprEF::from(local.decoder[17].clone().into()) - AB::ExprEF::from_u64(5)) * beta_challenges[1].into() + AB::ExprEF::from(local.decoder[13].clone().into()) * beta_challenges[2].into()) * (AB::ExprEF::from(local.decoder[22].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[4].clone().into())) * AB::ExprEF::from(local.decoder[3].clone().into()) * AB::ExprEF::from(local.decoder[2].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[1].clone().into())) + AB::ExprEF::from(local.decoder[23].clone().into()) * AB::ExprEF::from(local.decoder[5].clone().into()) * AB::ExprEF::from(local.decoder[4].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[3].clone().into()))) * AB::ExprEF::from(local.decoder[19].clone().into()) + AB::ExprEF::ONE - (AB::ExprEF::from(local.decoder[22].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[4].clone().into())) * AB::ExprEF::from(local.decoder[3].clone().into()) * AB::ExprEF::from(local.decoder[2].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[1].clone().into())) + AB::ExprEF::from(local.decoder[23].clone().into()) * AB::ExprEF::from(local.decoder[5].clone().into()) * AB::ExprEF::from(local.decoder[4].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[3].clone().into()))) * AB::ExprEF::from(local.decoder[19].clone().into())) * ((alpha.into() + AB::ExprEF::from(local.decoder[0].clone().into()) * beta_challenges[0].into() + (AB::ExprEF::from(local.decoder[17].clone().into()) - AB::ExprEF::from_u64(6)) * beta_challenges[1].into() + AB::ExprEF::from(local.decoder[14].clone().into()) * beta_challenges[2].into()) * (AB::ExprEF::from(local.decoder[22].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[4].clone().into())) * AB::ExprEF::from(local.decoder[3].clone().into()) * AB::ExprEF::from(local.decoder[2].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[1].clone().into())) + AB::ExprEF::from(local.decoder[23].clone().into()) * AB::ExprEF::from(local.decoder[5].clone().into()) * AB::ExprEF::from(local.decoder[4].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[3].clone().into()))) * AB::ExprEF::from(local.decoder[19].clone().into()) + AB::ExprEF::ONE - (AB::ExprEF::from(local.decoder[22].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[4].clone().into())) * AB::ExprEF::from(local.decoder[3].clone().into()) * AB::ExprEF::from(local.decoder[2].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[1].clone().into())) + AB::ExprEF::from(local.decoder[23].clone().into()) * AB::ExprEF::from(local.decoder[5].clone().into()) * AB::ExprEF::from(local.decoder[4].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[3].clone().into()))) * AB::ExprEF::from(local.decoder[19].clone().into())) * ((alpha.into() + AB::ExprEF::from(local.decoder[0].clone().into()) * beta_challenges[0].into() + (AB::ExprEF::from(local.decoder[17].clone().into()) - AB::ExprEF::from_u64(7)) * beta_challenges[1].into() + AB::ExprEF::from(local.decoder[15].clone().into()) * beta_challenges[2].into()) * (AB::ExprEF::from(local.decoder[22].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[4].clone().into())) * AB::ExprEF::from(local.decoder[3].clone().into()) * AB::ExprEF::from(local.decoder[2].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[1].clone().into())) + AB::ExprEF::from(local.decoder[23].clone().into()) * AB::ExprEF::from(local.decoder[5].clone().into()) * AB::ExprEF::from(local.decoder[4].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[3].clone().into()))) * AB::ExprEF::from(local.decoder[19].clone().into()) + AB::ExprEF::ONE - (AB::ExprEF::from(local.decoder[22].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[4].clone().into())) * AB::ExprEF::from(local.decoder[3].clone().into()) * AB::ExprEF::from(local.decoder[2].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[1].clone().into())) + AB::ExprEF::from(local.decoder[23].clone().into()) * AB::ExprEF::from(local.decoder[5].clone().into()) * AB::ExprEF::from(local.decoder[4].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[3].clone().into()))) * AB::ExprEF::from(local.decoder[19].clone().into())) * AB::ExprEF::from(aux_current[2].clone().into()) - ((alpha.into() + AB::ExprEF::from(local.decoder[0].clone().into()) * beta_challenges[0].into() + AB::ExprEF::from(local.decoder[17].clone().into()) * beta_challenges[1].into() + ((AB::ExprEF::from(next.decoder[8].clone().into()) * AB::ExprEF::from_u64(128) + AB::ExprEF::from(next.decoder[1].clone().into()) + AB::ExprEF::from(next.decoder[2].clone().into()).double() + AB::ExprEF::from_u64(4) * AB::ExprEF::from(next.decoder[3].clone().into()) + AB::ExprEF::from_u64(8) * AB::ExprEF::from(next.decoder[4].clone().into()) + AB::ExprEF::from_u64(16) * AB::ExprEF::from(next.decoder[5].clone().into()) + AB::ExprEF::from_u64(32) * AB::ExprEF::from(next.decoder[6].clone().into()) + AB::ExprEF::from_u64(64) * AB::ExprEF::from(next.decoder[7].clone().into())) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[22].clone().into()) * AB::ExprEF::from(local.decoder[4].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[3].clone().into())) * AB::ExprEF::from(local.decoder[2].clone().into()) * AB::ExprEF::from(local.decoder[1].clone().into())) + AB::ExprEF::from(next.stack[0].clone().into()) * AB::ExprEF::from(local.decoder[22].clone().into()) * AB::ExprEF::from(local.decoder[4].clone().into()) * (AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[3].clone().into())) * AB::ExprEF::from(local.decoder[2].clone().into()) * AB::ExprEF::from(local.decoder[1].clone().into())) * beta_challenges[2].into()) * AB::ExprEF::from(local.decoder[16].clone().into()) * (AB::ExprEF::from(local.decoder[17].clone().into()) - AB::ExprEF::from(next.decoder[17].clone().into())) + AB::ExprEF::ONE - AB::ExprEF::from(local.decoder[16].clone().into()) * (AB::ExprEF::from(local.decoder[17].clone().into()) - AB::ExprEF::from(next.decoder[17].clone().into()))) * AB::ExprEF::from(aux_next[2].clone().into()));
}
